<% existing_categories_ids = dishes.map{|dish| dish.category_id }.uniq %>

<% # select only categories who contains at least one dish
  @restaurant.categories.order(:order).select{|c| existing_categories_ids.include? c.id }.each do |category| %>

  <div class="row">

    <div class="col-xs-12">
      

      <h3><%= category.name %></h3>

      <ul class="menus-dishes">
        
        <% dishes.select{|d| d.category_id == category.id}.each do |dish| %>

          <li class="col-sm-6">
            <h4><%= link_to dish.name, dish %></h4>
            <%= dish.description %>
          </li>

        <% end # end of dishes%>

        
      </ul>
        
    </div>

  </div>

  <% end # end of categories%> 

